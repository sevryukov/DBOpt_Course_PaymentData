# DBOpt_Course_PaymentData
Задание к курсу Оптимизация баз данных - расчёт балансов

## Начальные действия
[x] Ознакомиться с документом, описывающим формулы расчёта баланса и примером его изменения
[x] Ознакомиться со скриптом создания базы данных
[x] Ознакомиться с программными компонентами (функции, триггера)
[x] Разработать и применить генератор тестовых данных
[x] Разработать простой тест на корректность расчёта баланса

- *Для заполнения БД был использован инструмент RedGate SQL Data Generator; файл: data_generation.sqlgen*
- *Тест на корректность расчета баланса находится в каталоге balance_sanity_check*

## Задачи I уровня
[x] Реализовать индексы, повышающие производительность операций вставки и изменения платежей без модификации программных компонент
- *Добавление индексов реализовано в каталоге Indexes*

## Задачи II уровня
В исходной версии балансы обновляются в рамках транзакции целевого действия над платежом - создания или изменения. Предположим, что требования к производительности не выполняются при такой реализации.

Введём две роли пользователей: бухгалтер-оператор и бухгалтер-аналитик.

**Оператор** - занимается вводом и корректировкой платежей, не имеет доступа к данным о балансах.

**Бухгалтер-аналитик** - отслеживает балансы и заведённые платежи для принятия решения о предпринимаемых финансовых действиях (какие счета использовать, какие образовались долги и т.д.).

- [x] Дать оценку затрат на выполнения операций расчёта балансов в рамках транзакций создания и изменения платежа. Желательно представить количественную оценку, но допустимо и относительную (к примеру, "90% ресурсов и времени уходит на расчёт баланса"). Чем детальнее, тем лучше.
- [x] Предложить сценарий оптимизации механизмов расчёта. Сценарий должен допускать максимизацию скорости целевых изменений и допускать отложенное вычисление балансов (балансы и данные платежей должны быть согласованы в конечном счёте).
- [x] Оценить недостатки предлагаемого сценария с точки зрения потенциальных пользователей.

- *Измерения и сценарии приведены в отчете TaskReport.pdf*

## Задачи III уровня
1. Реализовать предложенный сценарий отложенного вычисления.
2. Дать оценку затрат на выполнение операций расчёта балансов в рамках транзакций создания и изменения платежа. Дать заключение о полученном росте производительности, если таковое будет наблюдаться.
3. Дать оценку возникшим проблемам и недостаткам, сравнить их с оценками, сделанными при проектировании сценария оптимизации (указать, что сбылось, что неожиданно проявилось и т.д.).
4. Дать заключение о преимуществах и недостатках выполненной оптимизации (превосходят ли полученные преимущества те недостатки, которые возникли после оптимизации).
